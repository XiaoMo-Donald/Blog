layui.use(["form","layer","laydate","table","laytpl"],function(){function f(n){var i=layui.layer.open({title:"添加文章",type:2,content:"../../Admin/AddBlogArticle",success:function(t,i){var u=layui.layer.getChildFrame("body",i);n&&(u.find(".newsName").val(n.newsName),u.find(".abstract").val(n.abstract),u.find(".thumbImg").attr("src",n.newsImg),u.find("#news_content").val(n.content),u.find(".newsStatus select").val(n.newsStatus),u.find(".openness input[name='openness'][title='"+n.newsLook+"']").prop("checked","checked"),u.find(".newsTop input[name='newsTop']").prop("checked",n.newsTop),r.render());setTimeout(function(){layui.layer.tips("点击此处返回文章列表",".layui-layer-setwin .layui-layer-close",{tips:3})},500)}});layui.layer.full(i);t(window).on("resize",function(){layui.layer.full(i)})}var r=layui.form,n=parent.layer===undefined?layui.layer:top.layer,t=layui.jquery,e=layui.laydate,o=layui.laytpl,i=layui.table,u=i.render({elem:"#newsList",url:"../../AdminData/GetBlogArticles",cellMinWidth:95,page:!0,height:"full-125",limit:20,limits:[10,15,20,25],id:"articleListTable",cols:[[{type:"checkbox",fixed:"left",width:50},{field:"sortCode",title:"排序",width:60,align:"center"},{field:"name",title:"文章标题",width:350,align:"center"},{field:"abstract",title:"文章摘要",width:350,align:"center"},{field:"createTime",title:"发布时间",align:"center",minWidth:110,templet:function(n){return n.createTime.substring(0,10)}},{title:"操作",width:170,templet:"#newsListBar",fixed:"right",align:"center"}]]});r.on("switch(newsTop)",function(t){var i=n.msg("修改中，请稍候",{icon:16,time:!1,shade:.8});setTimeout(function(){n.close(i);t.elem.checked?n.msg("置顶成功！"):n.msg("取消置顶成功！")},500)});t(".search_btn").on("click",function(){t(".searchVal").val()!==""?i.reload("newsListTable",{page:{curr:1},where:{key:t(".searchVal").val()}}):n.msg("请输入搜索的内容")});t(".addBlogArticle_btn").click(function(){f()});t(".delAll_btn").click(function(){var f=i.checkStatus("articleListTable"),t=f.data,e=[],r;if(t.length>0){for(r in t)e.push(t[r].newsId);n.confirm("确定删除选中的文章？",{icon:3,title:"提示信息"},function(t){u.reload();n.close(t)})}else n.msg("请选择需要删除的文章")});i.on("tool(newsList)",function(t){var i=t.event,r=t.data;i==="edit"?f(r):i==="del"?n.confirm("确定删除此文章？",{icon:3,title:"提示信息"},function(t){u.reload();n.close(t)}):i==="look"&&n.alert("此功能需要前台展示，实际开发中传入对应的必要参数进行文章内容页面访问")})});