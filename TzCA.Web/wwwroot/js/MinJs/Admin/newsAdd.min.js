function renderArticlePage(){layui.use(["form","layer","layedit","laydate","upload"],function(){function i(n){return n<10?"0"+n:n}var r=layui.form,t,n,u;layer=parent.layer===undefined?layui.layer:top.layer;laypage=layui.laypage;upload=layui.upload;layedit=layui.layedit;laydate=layui.laydate;$=layui.jquery;t=layedit.build("news_content",{height:535,uploadImage:{url:"../../AdminData/UploadBlogArticleImage"}});layedit.sync(t);upload.render({elem:".thumbBox",url:"../../AdminData/UploadBlogArticleImage",method:"post",done:function(n){console.log(n);n.code===0?($(".thumbBox img").attr("src",n.data.src),$(".thumbBox").css("background","#fff")):layer.msg(n.msg)}});n=new Date;u=n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+" "+i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds());laydate.render({elem:"#release",type:"datetime",trigger:"click",done:function(n){u=n}});r.on("radio(release)",function(t){t.elem.title==="定时发布"?($(".releaseDate").removeClass("layui-hide"),$(".releaseDate #release").attr("lay-verify","required")):($(".releaseDate").addClass("layui-hide"),$(".releaseDate #release").removeAttr("lay-verify"),u=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds())});r.verify({articleName:function(n){if(n==="")return"文章标题不能为空"},articleContent:function(){if(layedit.getText(t)==="")return"文章内容不能为空"}});r.on("submit(addBlogArticle)",function(){var n=layedit.getText(t).substring(0,250),i=top.layer.msg("数据提交中，请稍候",{icon:16,time:!1,shade:.8});return $.post("../../AdminData/AddBlogArticle",{name:$(".articleName").val(),abstract:$(".abstract").val()===""?n:$(".abstract").val(),description:layedit.getContent(t).split('<audio controls="controls" style="display: none;"><\/audio>')[0],thumbnail:$(".thumbImg").attr("src")},function(n){n.state?(top.layer.close(i),top.layer.msg("文章添加成功！"),layer.closeAll("iframe"),parent.location.reload()):layer.msg(n.message)}),!1});r.on("submit(look)",function(){return layer.alert("此功能需要前台展示，实际开发中传入对应的必要参数进行文章内容页面访问"),!1})})}renderArticlePage();