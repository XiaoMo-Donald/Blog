var cacheStr=window.sessionStorage.getItem("cache"),oneLoginStr=window.sessionStorage.getItem("oneLogin");layui.use(["form","jquery","layer"],function(){function e(){t.open({type:1,title:"系统公告",area:"300px",shade:.8,id:"LAY_layuipro",btn:["火速围观"],moveType:1,content:'<div style="padding:15px 20px; text-align:justify; line-height: 22px; text-indent:2em;border-bottom:1px solid #e2e2e2;"><p class="layui-red">请使用模版前请务必仔细阅读首页右下角的《更新日志》，避免使用中遇到一些简单的问题造成困扰。<\/p><\/pclass><\/p><p>1.0发布以后发现很多朋友将代码上传到各种素材网站，当然这样帮我宣传我谢谢大家，但是有部分朋友上传到素材网站后将下载分值设置的相对较高，需要朋友们充钱才能下载。本人发现后通过和站长、网站管理员联系以后将分值调整为不需要充值才能下载或者直接免费下载。在此郑重提示各位：<span class="layui-red">本模版已进行作品版权证明，不管以何种形式获取的源码，请勿进行出售或者上传到任何素材网站，否则将追究相应的责任。<\/span><\/p><\/div>',success:function(n){var t=n.find(".layui-layer-btn");t.css("text-align","center");t.on("click",function(){u()})},cancel:function(){u()}})}function u(){window.sessionStorage.setItem("showNotice","true");n(window).width()>432&&t.tips("系统公告躲在了这里","#userInfo",{tips:3,time:1e3})}function f(){t.open({title:!1,type:1,content:'<div class="admin-header-lock" id="lock-box"><div class="admin-header-lock-img"><img src="images/face.jpg" class="userAvatar"/><\/div><div class="admin-header-lock-name" id="lockUserName">驊驊龔頾<\/div><div class="input_btn"><input type="password" class="admin-header-lock-input layui-input" autocomplete="off" placeholder="请输入密码解锁.." name="lockPwd" id="lockPwd" /><button class="layui-btn" id="unlock">解锁<\/button><\/div><p>请输入“123456”，否则不会解锁成功哦！！！<\/p><\/div>',closeBtn:0,shade:.9,success:function(){window.sessionStorage.getItem("userFace")&&n(".userAvatar").length>0&&n(".userAvatar").attr("src",n(".userAvatar").attr("src").split("images/")[0]+"images/"+window.sessionStorage.getItem("userFace").split("images/")[1])}});n(".admin-header-lock-input").focus()}function r(){var t=window.sessionStorage.getItem("skin");t&&(window.sessionStorage.getItem("skinValue")!="自定义"?n("body").addClass(window.sessionStorage.getItem("skin")):(n(".layui-layout-admin .layui-header").css("background-color",t.split(",")[0]),n(".layui-bg-black").css("background-color",t.split(",")[1]),n(".hideMenu").css("background-color",t.split(",")[2])))}var i=layui.form,n=layui.jquery,t=parent.layer===undefined?layui.layer:top.layer;/http(s*):\/\//.test(location.href)?window.sessionStorage.getItem("lockcms")!="true"&&window.sessionStorage.getItem("showNotice")!="true":t.alert("请先将项目部署到 localhost 下再进行访问【建议通过tomcat、webstorm、hb等方式运行，不建议通过iis方式运行】，否则部分数据将无法显示");window.sessionStorage.getItem("userFace")&&n(".userAvatar").length>0?(n("#userFace").attr("src",window.sessionStorage.getItem("userFace")),n(".userAvatar").attr("src",n(".userAvatar").attr("src").split("images/")[0]+"images/"+window.sessionStorage.getItem("userFace").split("images/")[1])):n("#userFace").attr("src","../../images/face.jpg");n(".showNotice").on("click",function(){e()});n(".lockcms").on("click",function(){window.sessionStorage.setItem("lockcms",!0);f()});window.sessionStorage.getItem("lockcms")=="true"&&f();n("body").on("click","#unlock",function(){n(this).siblings(".admin-header-lock-input").val()==""?(t.msg("请输入解锁密码！"),n(this).siblings(".admin-header-lock-input").focus()):n(this).siblings(".admin-header-lock-input").val()=="123456"?(window.sessionStorage.setItem("lockcms",!1),n(this).siblings(".admin-header-lock-input").val(""),t.closeAll("page")):(t.msg("密码错误，请重新输入！"),n(this).siblings(".admin-header-lock-input").val("").focus())});n(document).on("keydown",function(t){var t=t||window.event;t.keyCode==13&&n("#unlock").click()});n(".signOut").click(function(){window.sessionStorage.removeItem("menu");menu=[];window.sessionStorage.removeItem("curmenu")});n(".functionSetting").click(function(){t.open({title:"功能设定",area:["380px","280px"],type:"1",content:'<div class="functionSrtting_box"><form class="layui-form"><div class="layui-form-item"><label class="layui-form-label">开启Tab缓存<\/label><div class="layui-input-block"><input type="checkbox" name="cache" lay-skin="switch" lay-text="开|关"><div class="layui-word-aux">开启后刷新页面不关闭打开的Tab页<\/div><\/div><\/div><div class="layui-form-item"><label class="layui-form-label">Tab切换刷新<\/label><div class="layui-input-block"><input type="checkbox" name="changeRefresh" lay-skin="switch" lay-text="开|关"><div class="layui-word-aux">开启后切换窗口刷新当前页面<\/div><\/div><\/div><div class="layui-form-item"><label class="layui-form-label">单一登陆<\/label><div class="layui-input-block"><input type="checkbox" name="oneLogin" lay-filter="multipleLogin" lay-skin="switch" lay-text="是|否"><div class="layui-word-aux">开启后不可同时多个地方登录<\/div><\/div><\/div><div class="layui-form-item skinBtn"><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-normal" lay-submit="" lay-filter="settingSuccess">设定完成<\/a><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-primary" lay-submit="" lay-filter="noSetting">朕再想想<\/a><\/div><\/form><\/div>',success:function(){n(".functionSrtting_box input[name=cache]").prop("checked",cacheStr=="true"?!0:!1);n(".functionSrtting_box input[name=changeRefresh]").prop("checked",changeRefreshStr=="true"?!0:!1);n(".functionSrtting_box input[name=oneLogin]").prop("checked",oneLoginStr=="true"?!0:!1);i.on("submit(settingSuccess)",function(n){return window.sessionStorage.setItem("cache",n.field.cache=="on"?"true":"false"),window.sessionStorage.setItem("changeRefresh",n.field.changeRefresh=="on"?"true":"false"),window.sessionStorage.setItem("oneLogin",n.field.oneLogin=="on"?"true":"false"),window.sessionStorage.removeItem("menu"),window.sessionStorage.removeItem("curmenu"),location.reload(),!1});i.on("submit(noSetting)",function(){t.closeAll("page")});i.on("switch(multipleLogin)",function(n){t.tips("温馨提示：此功能需要开发配合，所以没有功能演示，敬请谅解",n.othis,{tips:1})});i.render()}})});window.sessionStorage.getItem("systemParameter")&&(systemParameter=JSON.parse(window.sessionStorage.getItem("systemParameter")),n(".footer p span").text(systemParameter.powerby));r();n(".changeSkin").click(function(){t.open({title:"更换皮肤",area:["310px","280px"],type:"1",content:'<div class="skins_box"><form class="layui-form"><div class="layui-form-item"><input type="radio" name="skin" value="默认" title="默认" lay-filter="default" checked=""><input type="radio" name="skin" value="橙色" title="橙色" lay-filter="orange"><input type="radio" name="skin" value="蓝色" title="蓝色" lay-filter="blue"><input type="radio" name="skin" value="自定义" title="自定义" lay-filter="custom"><div class="skinCustom"><input type="text" class="layui-input topColor" name="topSkin" placeholder="顶部颜色" /><input type="text" class="layui-input leftColor" name="leftSkin" placeholder="左侧颜色" /><input type="text" class="layui-input menuColor" name="btnSkin" placeholder="顶部菜单按钮" /><\/div><\/div><div class="layui-form-item skinBtn"><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-normal" lay-submit="" lay-filter="changeSkin">确定更换<\/a><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-primary" lay-submit="" lay-filter="noChangeSkin">朕再想想<\/a><\/div><\/form><\/div>',success:function(){var f=window.sessionStorage.getItem("skin"),e,u;window.sessionStorage.getItem("skinValue")&&n(".skins_box input[value="+window.sessionStorage.getItem("skinValue")+"]").attr("checked","checked");n(".skins_box input[value=自定义]").attr("checked")&&(n(".skinCustom").css("visibility","inherit"),n(".topColor").val(f.split(",")[0]),n(".leftColor").val(f.split(",")[1]),n(".menuColor").val(f.split(",")[2]));i.render();n(".skins_box").removeClass("layui-hide");n(".skins_box .layui-form-radio").on("click",function(){var t;n(this).find("div").text()=="橙色"?t="orange":n(this).find("div").text()=="蓝色"?t="blue":n(this).find("div").text()=="默认"&&(t="");n(this).find("div").text()!="自定义"?(n(".topColor,.leftColor,.menuColor").val(""),n("body").removeAttr("class").addClass("main_body "+t+""),n(".skinCustom").removeAttr("style"),n(".layui-bg-black,.hideMenu,.layui-layout-admin .layui-header").removeAttr("style")):n(".skinCustom").css("visibility","inherit")});n(".topColor").blur(function(){n(".layui-layout-admin .layui-header").css("background-color",n(this).val()+" !important")});n(".leftColor").blur(function(){n(".layui-bg-black").css("background-color",n(this).val()+" !important")});n(".menuColor").blur(function(){n(".hideMenu").css("background-color",n(this).val()+" !important")});i.on("submit(changeSkin)",function(i){i.field.skin!="自定义"?(i.field.skin=="橙色"?u="orange":i.field.skin=="蓝色"?u="blue":i.field.skin=="默认"&&(u=""),window.sessionStorage.setItem("skin",u)):(e=n(".topColor").val()+","+n(".leftColor").val()+","+n(".menuColor").val(),window.sessionStorage.setItem("skin",e),n("body").removeAttr("class").addClass("main_body"));window.sessionStorage.setItem("skinValue",i.field.skin);t.closeAll("page")});i.on("submit(noChangeSkin)",function(){n("body").removeAttr("class").addClass("main_body "+window.sessionStorage.getItem("skin")+"");n(".layui-bg-black,.hideMenu,.layui-layout-admin .layui-header").removeAttr("style");r();t.closeAll("page")})},cancel:function(){n("body").removeAttr("class").addClass("main_body "+window.sessionStorage.getItem("skin")+"");n(".layui-bg-black,.hideMenu,.layui-layout-admin .layui-header").removeAttr("style");r()}})})});