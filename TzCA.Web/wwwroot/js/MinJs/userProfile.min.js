var userProFile={_$inputArea:$(".inputCACommonStyle"),_$inputTips:$(".tips"),_$saveBtnsArea:$("form[name=UserProfileForm] .userProfileForm-btns"),init:function(){userProFile.listenInputEditBtn();userProFile.listenEle()},initFormValid:function(){layui.use(["form"],function(){let n=layui.form;n.verify({nickname:function(n){if(n==="")return"昵称不能为空！"},tzUrl:function(n){if(n!==""&&!new RegExp("javascript:").test(n)){if(!new RegExp("(http|https)://").test(n))return"链接不正确，必须包含 http:// 或者 https://";if(!/(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(n))return"链接不完整，请检查！"}}})})},renderDate:function(){layui.use(["laydate"],function(){let n=layui.laydate;n.render({elem:"#birthday"})})},reStatus:function(){userProFile._$inputArea.addClass("inputCAStyle");userProFile._$inputArea.attr("disabled","disabled");userProFile._$inputTips.hide();userProFile._$saveBtnsArea.removeClass("btnsShow")},initBtns:function(){userProFile.save();userProFile.cancel();userProFile.initFormValid()},save:function(){layui.use(["form"],function(){var t=layui.form,n=layui.layer;t.on("submit(userProFileSaveBtn)",function(t){return n.confirm("您确定要修改信息吗？",{title:"提示",btn:["确定","再考虑一下"],btnAlign:"c"},function(){let i={Nickname:filterXSS(t.field.Nickname),Birthday:filterXSS(t.field.Birthday),Location:filterXSS(t.field.Location),QQ:filterXSS(t.field.QQ),QQLink:filterXSS(t.field.QQLink),WeiboLink:filterXSS(t.field.WeiboLink),GithubLink:filterXSS(t.field.GithubLink),ProSiteLink:filterXSS(t.field.ProSiteLink),Remark:filterXSS(t.field.Remark)};$.ajax({url:"../../Account/SaveChangeProfile",type:"post",data:i,success:function(t){if(t.state){userProFile.reStatus();n.msg("保存成功",{icon:1});return}n.msg(t.message)},error:function(){n.msg("请求超时Ծ‸Ծ")}})}),!1})})},cancel:function(){$(".userProFileCancelBtn").off("click").on("click",function(n){n.preventDefault();layer.confirm("您确定不保存当前修改吗？",{title:"提示",btn:["确定","再考虑一下"],btnAlign:"c"},function(n){userProFile.reStatus();layer.close(n)})})},listenEle:function(){userProFile._$inputArea=$(".inputCACommonStyle");userProFile._$inputTips=$(".tips");userProFile._$saveBtnsArea=$("form[name=UserProfileForm] .userProfileForm-btns")},listenInputEditBtn:function(){$(".inputEdit").on("click",function(n){n.preventDefault();let i=$(this),t=i.parent().prev().find(".inputCACommonStyle"),u=i.parent().next().find(".tips"),f=t.hasClass("inputCAStyle"),r=$("form[name=UserProfileForm] .userProfileForm-btns");f&&(u.show(),t.removeClass("inputCAStyle"),t.removeAttr("disabled"),userProFile.renderDate(),t.focus());r.hasClass("btnsShow")||(r.addClass("btnsShow"),userProFile.initBtns())})}};