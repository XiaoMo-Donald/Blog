function draw(n){var f=$("#verificationCode").width(),e=$("#verificationCode").height(),o=document.getElementById("verificationCode"),t=o.getContext("2d"),s="A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),l=s.length,i,r,u;for(o.width=f,o.height=e,i=0;i<=3;i++){var a=Math.floor(Math.random()*l),h=Math.random()*30*Math.PI/180,c=s[a];n[i]=c.toLowerCase();r=10+i*20;u=20+Math.random()*8;t.font="bold 23px 微软雅黑";t.translate(r,u);t.rotate(h);t.fillStyle=randomColor();t.fillText(c,0,0);t.rotate(-h);t.translate(-r,-u)}for(i=0;i<=5;i++)t.strokeStyle=randomColor(),t.beginPath(),t.moveTo(Math.random()*f,Math.random()*e),t.lineTo(Math.random()*f,Math.random()*e),t.stroke();for(i=0;i<=30;i++)t.strokeStyle=randomColor(),t.beginPath(),r=Math.random()*f,u=Math.random()*e,t.moveTo(r,u),t.lineTo(r+1,u+1),t.stroke()}function randomColor(){var n=Math.floor(Math.random()*256),t=Math.floor(Math.random()*256),i=Math.floor(Math.random()*256);return"rgb("+n+","+t+","+i+")"}function listVerificationCodeEvent(){$("#verificationCode").click(function(n){if(n.preventDefault(),$(this).attr("data-disabled")!=="true")verificationCode.onDraw(show_num)})}var show_num=[],verificationCode={onDraw:function(n){draw(n)},valid:function(){var n=$("input[name=VerificationCode]"),t=n.val().toLowerCase(),i=show_num.join("");if(t===i)return!0;layer.msg("验证码错误");this.onDraw(show_num);return!1}};verificationCode.onDraw(show_num);listVerificationCodeEvent();